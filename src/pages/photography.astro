---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE } from '../consts';
import { getCollection } from 'astro:content';

const photos = await getCollection('photography');
const sortedPhotos = photos.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={`Photography - ${SITE_TITLE}`} description="Photography portfolio by Birol Senturk" />
	</head>
	<body>
		<Header />
		<main>
			<section class="page-header">
				<div class="container">
					<span class="section-label">Creative Work</span>
					<h1>Photography</h1>
					<p class="page-intro">A collection of moments captured through my lens.</p>
				</div>
			</section>

			<section class="gallery">
				<div class="container">
					{sortedPhotos.length === 0 ? (
						<div class="empty-state">
							<div class="empty-icon">
								<svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
									<rect x="2" y="6" width="20" height="14" rx="2"/>
									<circle cx="12" cy="13" r="4"/>
									<path d="M6 6V4h4"/>
								</svg>
							</div>
							<p>New photographs coming soon.</p>
							<a href="/" class="btn btn--outline">Back to Home</a>
						</div>
					) : (
						<div class="photo-grid">
							{sortedPhotos.map((photo) => (
								<article class="photo-item">
									<div class="photo-image">
										<img
											src={photo.data.imageUrl}
											alt={photo.data.imageAlt}
											loading="lazy"
										/>
									</div>
									<div class="photo-info">
										<h3>{photo.data.title}</h3>
										<p class="description">{photo.data.description}</p>
										{(photo.data.camera || photo.data.lens || photo.data.settings) && (
											<div class="photo-meta">
												{photo.data.camera && <span>{photo.data.camera}</span>}
												{photo.data.lens && <span>{photo.data.lens}</span>}
												{photo.data.settings && <span>{photo.data.settings}</span>}
											</div>
										)}
										{photo.data.tags && (
											<div class="tags">
												{photo.data.tags.map((tag) => (
													<span class="tag">{tag}</span>
												))}
											</div>
										)}
									</div>
								</article>
							))}
						</div>
					)}
				</div>
			</section>
		</main>
		<Footer />
	</body>
</html>

<style>
	.page-header {
		padding: var(--space-xl) 0 var(--space-lg);
		border-bottom: none;
	}

	.page-intro {
		font-size: 1.125rem;
		color: var(--text-muted);
		max-width: 500px;
		margin: 0;
	}

	.gallery {
		padding-top: 0;
	}

	.empty-state {
		text-align: center;
		padding: var(--space-xl) 0;
	}

	.empty-icon {
		color: var(--gray-300);
		margin-bottom: var(--space-md);
	}

	.empty-state p {
		color: var(--text-muted);
		font-size: 1.125rem;
		margin-bottom: var(--space-md);
	}

	.photo-grid {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: var(--space-md);
	}

	.photo-item {
		background: var(--cream-dark);
		transition: transform 0.3s ease;
	}

	.photo-item:hover {
		transform: translateY(-4px);
	}

	.photo-image {
		overflow: hidden;
	}

	.photo-image img {
		width: 100%;
		height: 300px;
		object-fit: cover;
		display: block;
		transition: transform 0.4s ease;
	}

	.photo-item:hover .photo-image img {
		transform: scale(1.03);
	}

	.photo-info {
		padding: var(--space-md);
	}

	.photo-info h3 {
		margin: 0 0 0.5rem 0;
		font-size: 1.125rem;
		color: var(--ink);
	}

	.description {
		margin: 0 0 var(--space-sm) 0;
		color: var(--text-muted);
		font-size: 0.9375rem;
	}

	.photo-meta {
		display: flex;
		flex-wrap: wrap;
		gap: var(--space-sm);
		margin-bottom: var(--space-sm);
	}

	.photo-meta span {
		font-size: 0.75rem;
		color: var(--gray-500);
		font-family: var(--font-display);
		letter-spacing: 0.02em;
	}

	.tags {
		display: flex;
		flex-wrap: wrap;
		gap: 0.5rem;
	}

	.tag {
		font-family: var(--font-display);
		font-size: 0.6875rem;
		font-weight: 600;
		letter-spacing: 0.08em;
		text-transform: uppercase;
		color: var(--accent);
		padding: 0.25rem 0.5rem;
		background: rgba(217, 93, 57, 0.1);
	}

	@media (max-width: 768px) {
		.photo-grid {
			grid-template-columns: 1fr;
		}

		.photo-image img {
			height: 250px;
		}
	}
</style>
